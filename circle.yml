dependencies:
  cache_directories:
    - Nimrod
    - babel

  pre:
    - if [[ ! -e Nimrod/bin/nimrod ]]; then git clone -b devel git://github.com/Araq/Nimrod.git && cd Nimrod && git clone --depth 1 git://github.com/nimrod-code/csources && cd Nimrod/csources && sh build.sh && cd Nimrod && bin/nimrod c koch && ./koch boot -d:release
    - ln -s Nimrod/bin/nimrod /home/ubuntu/bin/nimrod
    - if [[ ! -e ~/.babel/bin/babel ]]; then git clone https://github.com/nimrod-code/babel.git && cd babel && nimrod c -r src/babel install -y
    - ln -s ~/.babel/bin/babel /home/ubuntu/bin/babel
    - babel update
    - babel install -y

test:
  pre:
    - nimrod c bitarray.nim

  override:
    - ./bitarray
